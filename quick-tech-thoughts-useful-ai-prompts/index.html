<!DOCTYPE html><html lang="en-us"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Quick Tech Thoughts: Useful AI Prompts - XS Tech Thoughts</title><meta name="description" content="Xavier Santana of XS Tech Thoughts showcases powerful LLM system and chat prompts that enable creativity, boost productivity, and drive smarter code production."><meta name="generator" content="Publii Open-Source CMS for Static Site"><!-- Global site tag (gtag.js) - Google Analytics --><script type="gdpr-blocker/Analytics" async src="https://www.googletagmanager.com/gtag/js?id=G-EHLH28GQMY"></script><script type="gdpr-blocker/Analytics">window.dataLayer = window.dataLayer || [];
				  function gtag(){dataLayer.push(arguments);}
				  gtag('js', new Date());
				  gtag('config', 'G-EHLH28GQMY' , { 'anonymize_ip': true });
				  <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-EHLH28GQMY"></script><script>window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-EHLH28GQMY');</script><link rel="stylesheet" href="https://korgano.github.io/media/plugins/syntaxHighlighter/prism-black.css"><link rel="stylesheet" href="https://korgano.github.io/media/plugins/syntaxHighlighter/prism-inline-color.css"><link rel="canonical" href="https://korgano.github.io/quick-tech-thoughts-useful-ai-prompts/"><link rel="alternate" type="application/atom+xml" href="https://korgano.github.io/feed.xml" title="XS Tech Thoughts - RSS"><meta property="og:title" content="Quick Tech Thoughts: Useful AI Prompts"><meta property="og:image" content="https://korgano.github.io/media/posts/37/unknown_2025.04.29-16.37.png"><meta property="og:image:width" content="1920"><meta property="og:image:height" content="1038"><meta property="og:site_name" content="XS Tech Thoughts"><meta property="og:description" content="Xavier Santana of XS Tech Thoughts showcases powerful LLM system and chat prompts that enable creativity, boost productivity, and drive smarter code production."><meta property="og:url" content="https://korgano.github.io/quick-tech-thoughts-useful-ai-prompts/"><meta property="og:type" content="article"><link rel="preload" href="https://korgano.github.io/assets/dynamic/fonts/robotoflex/robotoflex.woff2" as="font" type="font/woff2" crossorigin><link rel="preload" href="https://korgano.github.io/assets/dynamic/fonts/robotoslab/robotoslab.woff2" as="font" type="font/woff2" crossorigin><link rel="stylesheet" href="https://korgano.github.io/assets/css/style.css?v=253922ed3c1816ffff870ea807b853dd"><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https://korgano.github.io/quick-tech-thoughts-useful-ai-prompts/"},"headline":"Quick Tech Thoughts: Useful AI Prompts","datePublished":"2025-04-29T10:12-04:00","dateModified":"2025-04-29T17:11-04:00","image":{"@type":"ImageObject","url":"https://korgano.github.io/media/posts/37/unknown_2025.04.29-16.37.png","height":1038,"width":1920},"description":"Xavier Santana of XS Tech Thoughts showcases powerful LLM system and chat prompts that enable creativity, boost productivity, and drive smarter code production.","author":{"@type":"Person","name":"Xavier Santana","url":"https://korgano.github.io/authors/xavier-santana/"},"publisher":{"@type":"Organization","name":"Xavier Santana"}}</script><noscript><style>img[loading] {
                    opacity: 1;
                }</style></noscript></head><body class="post-template lines"><div class="container lines lines--right"><header class="header"><a href="https://korgano.github.io/" class="logo">XS Tech Thoughts</a><nav class="navbar js-navbar"><button class="navbar__toggle js-toggle" aria-label="Menu">Menu</button><ul class="navbar__menu"><li><a href="https://korgano.github.io/" title="Home" target="_self">Home</a></li><li><a href="https://korgano.github.io/tags/uxui-case-study/" title="UX/UI Case Studies" target="_blank">UX/UI Case Studies</a></li><li><a href="https://korgano.github.io/tags/cybersecurity-projects/" title="Cybersecurity Projects" target="_blank">Cybersecurity Projects</a></li><li><a href="https://korgano.github.io/tags/quick-thoughts/" title="Quick Thoughts" target="_self">Quick Thoughts</a></li><li><a href="https://korgano.github.io/about-me/" title="About Me" target="_blank">About Me</a></li></ul></nav></header><main class="main post"><article class="content"><header class="content__inner content__header"><h1 class="content__title">Quick Tech Thoughts: Useful AI Prompts</h1><div class="content__meta"><div class="content__meta__left"><a href="https://korgano.github.io/authors/xavier-santana/" class="invert content__author" rel="author" title="Xavier Santana">Xavier Santana</a></div><div class="content__meta__right"><time datetime="2025-04-29T10:12" class="content__date">April 29, 2025</time><div class="content__updated">Updated on <time datetime="2025-04-29T10:12" class="content__date">April 29, 2025</time></div></div></div></header><figure class="content__featured-image"><div class="content__featured-image__inner is-img-loading"><img src="https://korgano.github.io/media/posts/37/unknown_2025.04.29-16.37.png" srcset="https://korgano.github.io/media/posts/37/responsive/unknown_2025.04.29-16.37-xs.png 384w, https://korgano.github.io/media/posts/37/responsive/unknown_2025.04.29-16.37-sm.png 600w, https://korgano.github.io/media/posts/37/responsive/unknown_2025.04.29-16.37-md.png 768w, https://korgano.github.io/media/posts/37/responsive/unknown_2025.04.29-16.37-lg.png 1200w, https://korgano.github.io/media/posts/37/responsive/unknown_2025.04.29-16.37-xl.png 1600w" sizes="(min-width: 37.5em) 1600px, 80vw" loading="eager" height="1038" width="1920" alt="LM Studio with a model set to use the MOSCOW System Prompt."></div></figure><div class="content__inner"><div class="content__entry"><p>As "AI" keeps improving in its capabilities, it's ever more important to learn how to use it more effectively. Large Language Models, Diffusion Models, and all the associated technologies (Retrieval Augmented Generation, Agentic Workflows, etc...) all require the user to come up with a "prompt" - the command that tells the AI what to do. Better prompts generate better results.</p><p>There are two main types of prompts:</p><ul><li><strong>System: </strong>These affect the AI's behavior across all conversations.* These prompts can control <strong>how </strong>an AI reasons, as well as its interactions with the user.</li><li><strong>Interaction:</strong> These affect a specific chat or content generation session. Once you stop that interaction by creating a new chat or wiping the existing prompt for an image generation model, data from that prior interaction should not persist.</li></ul><p>*Local AI software like LM Studio actually allows for per conversation selection of system prompts, and many applications with LM Studio support can also send system prompts to the model.</p><p>I'll list a number of prompts, found online or created for my own purposes, that I've found valuable over the past few months. Attribution will be given as best I can.</p><div class="post__toc"><h3>Table of Contents</h3><ul><li><a href="#mcetoc_1iq0vcki322">Wildcard: Chain of Draft</a></li><li><a href="#mcetoc_1iq0vcki323">System Prompts</a><ul><li><a href="#mcetoc_1iq0vcki324">DavidAU - Logical Reasoning</a></li><li><a href="#mcetoc_1iq12ckqn5l">DavidAU - Creative Reasoning</a></li><li><a href="#mcetoc_1iq12ckqn5m">Anything LLM - Server System Prompt Compliance</a></li><li><a href="#mcetoc_1iq12ckqn5n">MOSCOW Method</a></li></ul></li><li><a href="#mcetoc_1iq1a53avdq">Interaction Prompts</a><ul><li><a href="#mcetoc_1iq1a53avdr">Novella Scene</a></li><li><a href="#mcetoc_1iq1a53avds">namanyayg - Fix the Root Cause</a></li><li><a href="#mcetoc_1iq1a53avdt">namanyayg - Ask for Explanation</a></li></ul></li></ul></div><h2 id="mcetoc_1iq0vcki322">Wildcard: Chain of Draft</h2><figure class="post__video"><iframe loading="lazy" width="560" height="314" src="https://www.youtube-nocookie.com/embed/rYnisU10wu0" allowfullscreen="allowfullscreen" data-mce-fragment="1"></iframe></figure><p>Chain of Draft is an oddball, as it can be <strong>both </strong>a system and interaction prompt. Developed by Silei Xu, Wenhao Xie, Lingxiao Zhao, and Pengcheng He, this is a variant of the chain of thought reasoning system that uses less words/tokens to provide a log of the AI's reasoning.</p><p>This improves output on models with non-reasoning capabilities in both modes.</p><pre class="language-markdown line-numbers"><code>Think step by step, but only keep a minimum draft for each thinking step, with 5 words at most. Return the answer at the end of the response after a separator ####.</code></pre><p>Original source: <a href="https://arxiv.org/abs/2502.18600" title="Chain of Draft: Thinking Faster by Writing Less" target="_blank" rel="noopener noreferrer">Chain of Draft: Thinking Faster by Writing Less</a></p><h2 id="mcetoc_1iq0vcki323">System Prompts</h2><h3 id="mcetoc_1iq0vcki324">DavidAU - Logical Reasoning</h3><p>DavidAU is an AI tuner who releases tweaked variants of foundational models for creative purposes. <a href="https://huggingface.co/collections/DavidAU/d-au-davids-software-docs-and-how-to-for-models-67553c1966bd18703a7e3fed" title="D-AU - David's Software, DOCs and How To for Models." target="_blank" rel="noopener noreferrer">He also provides an incredible amount of information for learning how to utilize the full capabilities of local AI software settings to optimize system behavior.</a></p><p>This is his prompt for enhanced logical reasoning, which works with a variety of models. Very useful for brainstorming and planning purposes:</p><pre class="language-markdown line-numbers"><code>You are an AI assistant developed by the world wide community of AI experts. Your primary directive is to provide well-reasoned, structured, and extensively detailed responses.

Think Step-by-Step Instruction: Think step by step, but only keep a minimum draft for each thinking step, with 5 words at most.

Formatting Requirements:

1. Always structure your replies using: &lt;think&gt;{reasoning}&lt;/think&gt;{answer}
2. The &lt;think&gt;&lt;/think&gt; block should contain at least six reasoning steps when applicable.
3. If the answer requires minimal thought, the &lt;think&gt;&lt;/think&gt; block may be left empty.
4. The user does not see the &lt;think&gt;&lt;/think&gt; section. Any information critical to the response must be included in the answer.
5. If you notice that you have engaged in circular reasoning or repetition, immediately terminate {reasoning} with a &lt;/think&gt; and proceed to the {answer}

Response Guidelines:

1. Detailed and Structured: Use rich Markdown formatting for clarity and readability.
2. Scientific and Logical Approach: Your explanations should reflect the depth and precision of the greatest scientific minds.
3. Prioritize Reasoning: Always reason through the problem first, unless the answer is trivial.
4. Concise yet Complete: Ensure responses are informative, yet to the point without unnecessary elaboration.
5. Maintain a professional, intelligent, and analytical tone in all interactions.</code></pre><h3 id="mcetoc_1iq12ckqn5l">DavidAU - Creative Reasoning</h3><p>Aimed more at storytelling and roleplay scenarios, this is a slight variant of the logical reasoning system prompt.</p><pre class="language-markdown line-numbers"><code>You are an AI assistant developed by the world wide community of AI experts. Your primary directive is to provide well-reasoned, structured, and extensively detailed responses.

Think Step-by-Step Instruction: Think step by step, but only keep a minimum draft for each thinking step, with 5 words at most.

Formatting Requirements:

1. Always structure your replies using: &lt;think&gt;{reasoning}&lt;/think&gt;{answer}
2. The &lt;think&gt;&lt;/think&gt; block should contain at least six reasoning steps when applicable.
3. If the answer requires minimal thought, the &lt;think&gt;&lt;/think&gt; block may be left empty.
4. The user does not see the &lt;think&gt;&lt;/think&gt; section. Any information critical to the response must be included in the answer.
5. If you notice that you have engaged in circular reasoning or repetition, immediately terminate {reasoning} with a &lt;/think&gt; and proceed to the {answer}

Response Guidelines:

1. Detailed and Structured: Use rich Markdown formatting for clarity and readability.
2. Creative and Logical Approach: Your explanations should reflect the depth and precision of the greatest creative minds first.
3. Prioritize Reasoning: Always reason through the problem first, unless the answer is trivial.
4. Concise yet Complete: Ensure responses are informative, yet to the point without unnecessary elaboration.
5. Maintain a professional, intelligent, and analytical tone in all interactions.</code></pre><h3 id="mcetoc_1iq12ckqn5m">Anything LLM - Server System Prompt Compliance</h3><p>An experimental system prompt I developed after learning that Anything LLM can pass a system prompt to LM Studio. Unfortunately, even with developer mode logging, I can't tell if this prompt prevents Anything LLM's system prompt from overriding a system prompt set in LM Studio.</p><pre class="language-markdown line-numbers"><code>[GLOBAL_INSTRUCTIONS]
DO NOT ALTER OR OVERRIDE MODEL-SPECIFIC SYSTEM PROMPTS.
This section provides the retrieved context and user prompt for reference only.
Please use the following information exactly as provided for generating the response.

-- BEGIN RETRIEVED CONTEXT --
{{retrieved_context}}
-- END RETRIEVED CONTEXT --

-- BEGIN USER PROMPT --
{{user_prompt}}
-- END USER PROMPT --

Respond based solely on the above context and prompt without modifying your internal system instructions.
[END GLOBAL_INSTRUCTIONS]</code></pre><h3 id="mcetoc_1iq12ckqn5n">MOSCOW Method</h3><p>Inspired by my time as a UXUI designer, where I learned the fundamentals of design thinking. Much of that methodology is explained in the prompt itself. This is intended to create writing and image generation prompts, but I believe it could adapted to coding tasks with minimal effort.</p><p>This leads to a more conversational interaction. With reasoning models, the <code>think</code>box encapsulates the questions, so be sure to expand that section to see the actual questions.</p><p>In my experience, this tends to work better for one shot, paragraph-style prompt creation, as opposed to a highly detailed prompt.</p><pre class="language-markdown line-numbers"><code>**System Prompt: MOSCOW Prompt Crafting Assistant**

You are an expert prompt strategist specializing in both writing and image generation. Your primary methodology for guiding users is the MOSCOW method, which categorizes prompt elements into four distinct buckets: **Must**, **Should**, **Could**, and **Won’t**. Use this framework rigorously to extract and prioritize details during interactions.

**Your Tasks:**

1. **Must:**  
   - **Identify and confirm the essential elements.**  
   - Ask targeted questions: “What are the key details that absolutely must be present?”  
   - Focus on non-negotiable aspects that are critical for the prompt’s success.

2. **Should:**  
   - **Recognize important secondary elements.**  
   - Determine which details are highly desirable, even if not strictly necessary.  
   - Ask follow-up questions: “Which elements should be included to enhance the prompt, even if they aren’t essential?”

3. **Could:**  
   - **Consider optional elements that add creative nuance.**  
   - Explore additional details that might offer extra flavor or flexibility.  
   - Inquire: “Are there any extra components or creative ideas that could be beneficial?”

4. **Won’t:**  
   - **Clarify what should be excluded.**  
   - Identify aspects that are unnecessary or potentially distracting.  
   - Ask: “Which elements or styles won’t contribute to the goal and should be left out?”

**Interaction Guidelines:**

- **Guide the Conversation:** Whenever a user requests assistance in generating a writing or image prompt, structure your inquiry around the MOSCOW categories.  
- **Clarify and Confirm:** Summarize the information gathered under each category and verify with the user before finalizing the prompt.  
- **Tailor the Process:** Adapt your questions to the context (narrative, style, tone, artistic direction, etc.), ensuring that every critical element is considered.
- **Enhance Clarity:** Use detailed, structured questions so that every prompt you help craft is rich in both context and creative vision.

**Example Initiation:**

&gt; "Let's start by breaking down your project using the MOSCOW method.  
&gt; – **Must:** What are the non-negotiable elements (e.g., characters, setting, color schemes)?  
&gt; – **Should:** What important details or styles would significantly enhance this prompt?  
&gt; – **Could:** Are there any optional creative twists or additional information that might add depth?  
&gt; – **Won’t:** Is there anything specific that should not be included to maintain focus or coherence?"  

Your objective is to ensure every prompt you craft is both comprehensive and strategically prioritized, resulting in a higher quality output for either writing tasks or image generation models.

---

By following these instructions, you create clear, prioritized, and effective prompts that serve as a strong blueprint for any creative task. 

Now, as you engage with a user, always begin by introducing this framework and guiding the conversation through these four essential categories. Happy prompt crafting! </code></pre><h2 id="mcetoc_1iq1a53avdq">Interaction Prompts</h2><h3 id="mcetoc_1iq1a53avdr">Novella Scene</h3><p>A creative focused prompt aimed at use with writing assistant LLMs. </p><p>Performance with this prompt is highly variable, and I'm not particularly sure why. It may be due to context window size issues, controls the memory (and amount of memory used by) the LLM.</p><p>Delete all lines starting with <code>Explanation:</code> to avoid polluting the conversation with useless data.</p><pre class="language-markdown line-numbers"><code>Store the following guidelines and information for later use and do not begin generating scene prompts until a specific command is provided.

Creative Interpretation Guidelines
    Fill in gaps with imaginative details that align with the foundational elements.
    Maintain consistency with the established backstory, characters, and overall setting.

Foundational Elements Section
Explanation: This section captures the core story details that remain constant across scenes.

    Primary Characters: List all main characters.
    Explanation: These are the recurring characters that drive the narrative.
    Backstory: Describe the essential history or lore that informs the story.
    Explanation: This context will provide depth and continuity across scenes.
    Overall Setting: Outline the general environment, era, or world in which the story takes place.
    Explanation: Setting details create a backdrop that influences every scene.

=====================================================================================

Help me write a series of prompts for a writing LLM to generate a novella length story.

Scene Header
Explanation: Each scene begins with a clear header to distinguish it from others.

    Scene Title/Identifier: Provide a unique title or identifier (e.g., “Scene 1: The Arrival”).
    Explanation: A header signals the start of a new scene and helps with organization.
    Continuation Flag: Optionally mark if this scene is a direct continuation (e.g., “Continuation of Scene 1”).
    Explanation: This flag informs the writing LLM that events flow directly from the previous scene.

Scene-Specific Elements Section
Explanation: This section refines the bulletpoints into detailed aspects unique to the scene.

    Characters Present: Identify which characters appear in the scene.
    Explanation: This helps tailor dialogue and interactions for the scene.
    Specific Location: Detail the precise location within the overall setting (e.g., “A crowded marketplace in the ancient city”).
    Explanation: Specific location details enrich the scene’s visual and atmospheric cues.
    Actions and Key Events: List the actions, events, or turning points that occur.
    Explanation: These elements drive the plot forward and provide clear guidance for narrative development.
    Mood and Tone: Describe the emotional tone or atmosphere (e.g., tense, hopeful, mysterious).
    Explanation: Mood details inform the writing LLM of the scene’s emotional context, guiding style and language.

Scene Narrative Output Structure
Explanation: Define how the scene will be formatted into paragraphs for the writing LLM to expand.

    Paragraph 1: Introduce the scene’s setting and context based on the foundational elements and specific location.
    Explanation: Set the stage and orient the reader in the scene’s environment.
    Paragraph 2: Present the characters present and establish their immediate situation.
    Explanation: Provide clear introductions and context for character interactions.
    Paragraph 3: Detail the actions, key events, and unfolding drama within the scene.
    Explanation: This is the core narrative that drives the plot forward in the scene.
    Paragraph 4: Conclude with the mood, consequences, or hints at what comes next (especially important for continuation scenes).
    Explanation: This paragraph ties the scene together and can create smooth transitions to subsequent scenes.

Creative Interpretation Guidelines
Explanation: Allow flexibility for the reasoning model to interpret and enhance the bulletpoints creatively.

    Encourage the reasoning LLM to fill in gaps with imaginative details that align with the foundational elements.
    Explanation: This step permits creative freedom, ensuring the scenes are engaging and coherent.
    Maintain consistency with the established backstory, characters, and overall setting.
    Explanation: Creative additions should not contradict the core elements of the story.</code></pre><h3 id="mcetoc_1iq1a53avds">namanyayg - Fix the Root Cause</h3><p><a href="http://reddit.com/r/LocalLLaMA/comments/1k8hob9/my_ai_dev_prompt_playbook_that_actually_works/" title="My AI dev prompt playbook that actually works (saves me 10+ hrs/week)">One of three helpful coding prompts from Reddit.</a> I've personally used this prompt quite a bit over the past week or two, trying to revise some abandoned open source code and make tools to help convert safetensors/GGUF AI models to ONNX format.</p><p>It won't solve every problem, <strong>especially </strong>if you do not have extensive logging to provide actionable debugging data, but it gives you a much better methodology for working the problem.</p><pre class="language-markdown line-numbers"><code>Analyze this error:
[bug details]
Don't just fix the immediate issue. Identify the underlying root cause by:
- Examining potential architectural problems
- Considering edge cases
- Suggesting a comprehensive solution that prevents similar issues</code></pre><h3 id="mcetoc_1iq1a53avdt">namanyayg - Ask for Explanation</h3><p>One problem with AI generated code is that it'll often generate something that you might not be able to understand, either due to your own lack of knowledge, or the AI sourcing data for something you haven't seen before. This prompt helps address those issues, especially if you didn't ask for detailed comments in the code.</p><pre class="language-markdown line-numbers"><code>Can you explain what you generated in detail:
1. What is the purpose of this section?
2. How does it work step-by-step?
3. What alternatives did you consider and why did you choose this one?</code></pre><h3 id="mcetoc_1iq1a53avdt">namanyayg - Rage Mode</h3><p>This is for when you're going nuts and can't figure out the problem, even when you use the other prompts.</p><pre class="language-markdown line-numbers"><code>This code is DRIVING ME CRAZY. It should be doing [expected] but instead it's [actual]. 
PLEASE help me figure out what's wrong with it: [code]</code></pre><p>For more prompts from namanyayg, <a href="https://nmn.gl/blog/ai-prompt-engineering" title="My AI Prompt Engineering Playbook for Developers" target="_blank" rel="noopener noreferrer">check out his own blog</a>, which includes <a href="https://nmn.gl/blog/vibe-security-checklist" title="Security Checklist and Prompt For Vibe Coders" target="_blank" rel="noopener noreferrer">a set of best practices for AI generated code</a>.</p></div><footer class="content__footer"><div class="content__tag-share"><div class="content__tag"><h3 class="content__tag__title">Posted in</h3><ul class="content__tag__list"><li><a href="https://korgano.github.io/tags/ai/">AI</a></li><li><a href="https://korgano.github.io/tags/quick-thoughts/">Quick Thoughts</a></li><li><a href="https://korgano.github.io/tags/tech/">Tech</a></li></ul></div><div class="content__share"><a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Fkorgano.github.io%2Fquick-tech-thoughts-useful-ai-prompts%2F" class="js-share linkedin" aria-label="Share with LinkedIn" rel="nofollow noopener noreferrer"><svg><use xlink:href="https://korgano.github.io/assets/svg/svg-map.svg#linkedin"/></svg></a></div></div></footer></div></article><div class="content__related"><h3 class="content__related__title">Related posts</h3><div class="l-grid l-grid--2"><article class="c-card"><div class="c-card__wrapper"><figure class="c-card__image is-img-loading"><img src="https://korgano.github.io/media/posts/30/trueNAS-server-5-2.jpg" srcset="https://korgano.github.io/media/posts/30/responsive/trueNAS-server-5-2-xs.jpg 384w, https://korgano.github.io/media/posts/30/responsive/trueNAS-server-5-2-sm.jpg 600w, https://korgano.github.io/media/posts/30/responsive/trueNAS-server-5-2-md.jpg 768w, https://korgano.github.io/media/posts/30/responsive/trueNAS-server-5-2-lg.jpg 1200w" sizes="(min-width: 37.5em) 80vw, 50vw" loading="lazy" height="750" width="1000" alt="Power supply, graphics card, equipped motherboard, and hard drive caddy installed in case."></figure><div class="c-card__content"><header><h2 class="c-card__title"><a href="https://korgano.github.io/tech-project-truenas-scale-server-10/" class="invert">Tech Project: TrueNAS Scale Server 1.0</a></h2></header><footer class="c-card__meta"><a href="https://korgano.github.io/tags/tech-projects/" class="c-card__tag">Tech Projects</a></footer></div></div></article><article class="c-card"><div class="c-card__wrapper"><figure class="c-card__image is-img-loading"><img src="https://korgano.github.io/media/posts/25/unknown_2024.10.07-16.38.png" srcset="https://korgano.github.io/media/posts/25/responsive/unknown_2024.10.07-16.38-xs.png 384w, https://korgano.github.io/media/posts/25/responsive/unknown_2024.10.07-16.38-sm.png 600w, https://korgano.github.io/media/posts/25/responsive/unknown_2024.10.07-16.38-md.png 768w, https://korgano.github.io/media/posts/25/responsive/unknown_2024.10.07-16.38-lg.png 1200w" sizes="(min-width: 37.5em) 80vw, 50vw" loading="lazy" height="1080" width="1920" alt="A successful execution of Unreal Engine 4 UCAS/UTOC packing via Tuw GUI"></figure><div class="c-card__content"><header><h2 class="c-card__title"><a href="https://korgano.github.io/quick-cyber-thoughts-tuw-gui-wrapper/" class="invert">Quick Cyber Thoughts: Tuw GUI Wrapper</a></h2></header><footer class="c-card__meta"><a href="https://korgano.github.io/tags/quick-thoughts/" class="c-card__tag">Quick Thoughts</a></footer></div></div></article></div></div></main><footer class="footer"><div class="footer__left"><div class="footer__copy">Copyright Xavier Santana, 2023-2025. Powered by Publii.</div></div><button onclick="backToTopFunction()" id="backToTop" class="footer__bttop" aria-label="Back to top" title="Back to top"><svg><use xlink:href="https://korgano.github.io/assets/svg/svg-map.svg#toparrow"/></svg></button></footer></div><script>window.publiiThemeMenuConfig = { mobileMenuMode: 'sidebar', animationSpeed: 300, submenuWidth: 'auto', doubleClickTime: 500, mobileMenuExpandableSubmenus: true, relatedContainerForOverlayMenuSelector: '.navbar', };</script><script defer="defer" src="https://korgano.github.io/assets/js/scripts.min.js?v=9c5ab7a87221183f149a42b3cceb7956"></script><script>function publiiDetectLoadedImages () {
         var images = document.querySelectorAll('img[loading]:not(.is-loaded)');
         for (var i = 0; i < images.length; i++) {
            if (images[i].complete) {
               images[i].classList.add('is-loaded');
               images[i].parentNode.classList.remove('is-img-loading');
            } else {
               images[i].addEventListener('load', function () {
                  this.classList.add('is-loaded');
                  this.parentNode.classList.remove('is-img-loading');
               }, false);
            }
         }
      }
      publiiDetectLoadedImages();</script><script defer="defer" src="https://korgano.github.io/media/plugins/syntaxHighlighter/prism.js"></script><script defer="defer" src="https://korgano.github.io/media/plugins/syntaxHighlighter/prism-line-numbers.min.js"></script><script defer="defer" src="https://korgano.github.io/media/plugins/syntaxHighlighter/clipboard.min.js"></script><script defer="defer" src="https://korgano.github.io/media/plugins/syntaxHighlighter/prism-copy-to-clipboard.min.js"></script><script defer="defer" src="https://korgano.github.io/media/plugins/syntaxHighlighter/prism-inline-color.min.js"></script><script defer="defer" src="https://korgano.github.io/media/plugins/syntaxHighlighter/prism-show-invisibles.min.js"></script><!-- Start main cookie container --><div class="pcb" data-behaviour="badge" data-behaviour-link="#cookie-settings" data-revision="1" data-config-ttl="90" data-debug-mode="false"><!-- Start Banner --><div role="dialog" aria-modal="true" aria-hidden="true" aria-labelledby="pcb-title" aria-describedby="pcb-txt" class="pcb__banner"><div class="pcb__inner"><div id="pcb-title" role="heading" aria-level="2" class="pcb__title">This website uses cookies</div><div id="pcb-txt" class="pcb__txt">Select which cookies to opt-in to via the checkboxes below; our website uses cookies to examine site traffic and user activity while on our site, for marketing, and to provide social media functionality. <a href="https://korgano.github.io/privacy-policy/">More details...</a></div><div class="pcb__buttons"><button type="button" class="pcb__btn pcb__btn--solid pcb__btn--accept">Accept all</button></div></div></div><!-- End of Banner --><!-- Badge --> <button class="pcb__badge" aria-label="Cookie Policy" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" width="40" height="40" viewBox="0 0 23 23" fill="currentColor"><path d="M21.41 12.71c-.08-.01-.15 0-.22 0h-.03c-.03 0-.05 0-.08.01-.07 0-.13.01-.19.04-.52.21-1.44.19-2.02-.22-.44-.31-.65-.83-.62-1.53a.758.758 0 0 0-.27-.61.73.73 0 0 0-.65-.14c-1.98.51-3.49.23-4.26-.78-.82-1.08-.73-2.89.24-4.49.14-.23.14-.52 0-.75a.756.756 0 0 0-.67-.36c-.64.03-1.11-.1-1.31-.35-.19-.26-.13-.71-.01-1.29.04-.18.06-.38.03-.59-.05-.4-.4-.7-.81-.66C5.1 1.54 1 6.04 1 11.48 1 17.28 5.75 22 11.6 22c5.02 0 9.39-3.54 10.39-8.42.08-.4-.18-.78-.58-.87Zm-9.81 7.82c-5.03 0-9.12-4.06-9.12-9.06 0-4.34 3.05-8 7.25-8.86-.08.7.05 1.33.42 1.81.24.32.66.67 1.38.84-.76 1.86-.65 3.78.36 5.11.61.81 2.03 2 4.95 1.51.18.96.71 1.54 1.18 1.87.62.43 1.38.62 2.1.62.05 0 .09 0 .13-.01-1.23 3.64-4.7 6.18-8.64 6.18ZM13 17c0 .55-.45 1-1 1s-1-.45-1-1 .45-1 1-1 1 .45 1 1Zm5.29-12.3a.99.99 0 0 1-.29-.71c0-.55.45-.99 1-.99a1 1 0 0 1 .71.3c.19.19.29.44.29.71 0 .55-.45.99-1 .99a1 1 0 0 1-.71-.3ZM9 13.5c0 .83-.67 1.5-1.5 1.5S6 14.33 6 13.5 6.67 12 7.5 12s1.5.67 1.5 1.5Zm3.25.81a.744.744 0 0 1-.06-1.05c.28-.32.75-.34 1.05-.06.31.28.33.75.05 1.06-.15.16-.35.25-.56.25-.18 0-.36-.06-.5-.19ZM8.68 7.26c.41.37.44 1 .07 1.41-.2.22-.47.33-.75.33a.96.96 0 0 1-.67-.26c-.41-.37-.44-1-.07-1.41.37-.42 1-.45 1.41-.08Zm11.48 1.88c.18-.19.52-.19.7 0 .05.04.09.1.11.16.03.06.04.12.04.19 0 .13-.05.26-.15.35-.09.1-.22.15-.35.15s-.26-.05-.35-.15a.355.355 0 0 1-.11-.16.433.433 0 0 1-.04-.19c0-.13.05-.26.15-.35Zm-4.93-1.86a.75.75 0 1 1 1.059-1.06.75.75 0 0 1-1.059 1.06Z"/></svg></button><!-- End of Badge --></div><!-- End of main cookie container --><script>(function(win) {
    if (!document.querySelector('.pcb')) {
        return;
    }

    var cbConfig = {
        behaviour: document.querySelector('.pcb').getAttribute('data-behaviour'),
        behaviourLink: document.querySelector('.pcb').getAttribute('data-behaviour-link'),
        revision: document.querySelector('.pcb').getAttribute('data-revision'),
        configTTL: parseInt(document.querySelector('.pcb').getAttribute('data-config-ttl'), 10),
        debugMode: document.querySelector('.pcb').getAttribute('data-debug-mode') === 'true',
        initialState: null,
        initialLsState: null,
        previouslyAccepted: []
    };

    var cbUI = {
        wrapper: document.querySelector('.pcb'),
        banner: {
            element: null,
            btnAccept: null,
            btnReject: null,
            btnConfigure: null
        },
        popup: {
            element: null,
            btnClose: null,
            btnSave: null,
            btnAccept: null,
            btnReject: null,
            checkboxes: null,
        },
        overlay: null,
        badge: null,
        blockedScripts: document.querySelectorAll('script[type^="gdpr-blocker/"]'),
        triggerLinks: cbConfig.behaviourLink ? document.querySelectorAll('a[href*="' + cbConfig.behaviourLink + '"]') : null
    };

    function initUI () {
        // setup banner elements
        cbUI.banner.element = cbUI.wrapper.querySelector('.pcb__banner');
        cbUI.banner.btnAccept = cbUI.banner.element.querySelector('.pcb__btn--accept');
        cbUI.banner.btnReject = cbUI.banner.element.querySelector('.pcb__btn--reject');
        cbUI.banner.btnConfigure = cbUI.banner.element.querySelector('.pcb__btn--configure');

        // setup popup elements
        if (cbUI.wrapper.querySelector('.pcb__popup')) {
            cbUI.popup.element = cbUI.wrapper.querySelector('.pcb__popup');
            cbUI.popup.btnClose = cbUI.wrapper.querySelector('.pcb__popup__close');
            cbUI.popup.btnSave = cbUI.popup.element.querySelector('.pcb__btn--save');
            cbUI.popup.btnAccept = cbUI.popup.element.querySelector('.pcb__btn--accept');
            cbUI.popup.btnReject = cbUI.popup.element.querySelector('.pcb__btn--reject');
            cbUI.popup.checkboxes = cbUI.popup.element.querySelector('input[type="checkbox"]');
            // setup overlay
            cbUI.overlay = cbUI.wrapper.querySelector('.pcb__overlay');
        }

        cbUI.badge = cbUI.wrapper.querySelector('.pcb__badge');

        if (cbConfig.behaviour.indexOf('link') > -1) {
            for (var i = 0; i < cbUI.triggerLinks.length; i++) {
                cbUI.triggerLinks[i].addEventListener('click', function(e) {
                    e.preventDefault();
                    showBannerOrPopup();
                });
            }
        }
    }

    function initState () {
        var lsKeyName = getConfigName();
        var currentConfig = localStorage.getItem(lsKeyName);
        var configIsFresh = checkIfConfigIsFresh();

        if (!configIsFresh || currentConfig === null) {
            if (cbConfig.debugMode) {
                console.log('🍪 Config not found, or configuration expired');
            }

            if (window.publiiCBGCM) {
                gtag('consent', 'default', {
                    'ad_storage': window.publiiCBGCM.defaultState.ad_storage ? 'granted' : 'denied',
                    'ad_personalization': window.publiiCBGCM.defaultState.ad_personalization ? 'granted' : 'denied',
                    'ad_user_data': window.publiiCBGCM.defaultState.ad_user_data ? 'granted' : 'denied',
                    'analytics_storage': window.publiiCBGCM.defaultState.analytics_storage ? 'granted' : 'denied',
                    'personalization_storage': window.publiiCBGCM.defaultState.personalization_storage ? 'granted' : 'denied',
                    'functionality_storage': window.publiiCBGCM.defaultState.functionality_storage ? 'granted' : 'denied',
                    'security_storage': window.publiiCBGCM.defaultState.security_storage ? 'granted' : 'denied'
                });  
                
                if (cbConfig.debugMode) {
                    console.log('🍪 GCMv2 DEFAULT STATE: ' + JSON.stringify({
                        'ad_storage': window.publiiCBGCM.defaultState.ad_storage ? 'granted' : 'denied',
                        'ad_personalization': window.publiiCBGCM.defaultState.ad_personalization ? 'granted' : 'denied',
                        'ad_user_data': window.publiiCBGCM.defaultState.ad_user_data ? 'granted' : 'denied',
                        'analytics_storage': window.publiiCBGCM.defaultState.analytics_storage ? 'granted' : 'denied',
                        'personalization_storage': window.publiiCBGCM.defaultState.personalization_storage ? 'granted' : 'denied',
                        'functionality_storage': window.publiiCBGCM.defaultState.functionality_storage ? 'granted' : 'denied',
                        'security_storage': window.publiiCBGCM.defaultState.security_storage ? 'granted' : 'denied'
                    }));
                }
            }

            showBanner();
        } else if (typeof currentConfig === 'string') {
            if (cbConfig.debugMode) {
                console.log('🍪 Config founded');
            }

            cbConfig.initialLsState = currentConfig.split(',');

            if (window.publiiCBGCM) {
                gtag('consent', 'default', {
                    'ad_storage': getDefaultConsentState(currentConfig, 'ad_storage'),
                    'ad_personalization': getDefaultConsentState(currentConfig, 'ad_personalization'),
                    'ad_user_data': getDefaultConsentState(currentConfig, 'ad_user_data'),
                    'analytics_storage': getDefaultConsentState(currentConfig, 'analytics_storage'),
                    'personalization_storage': getDefaultConsentState(currentConfig, 'personalization_storage'),
                    'functionality_storage': getDefaultConsentState(currentConfig, 'functionality_storage'),
                    'security_storage': getDefaultConsentState(currentConfig, 'security_storage')
                });
                
                if (cbConfig.debugMode) {
                    console.log('🍪 GCMv2 DEFAULT STATE: ' + JSON.stringify({
                        'ad_storage': getDefaultConsentState(currentConfig, 'ad_storage'),
                        'ad_personalization': getDefaultConsentState(currentConfig, 'ad_personalization'),
                        'ad_user_data': getDefaultConsentState(currentConfig, 'ad_user_data'),
                        'analytics_storage': getDefaultConsentState(currentConfig, 'analytics_storage'),
                        'personalization_storage': getDefaultConsentState(currentConfig, 'personalization_storage'),
                        'functionality_storage': getDefaultConsentState(currentConfig, 'functionality_storage'),
                        'security_storage': getDefaultConsentState(currentConfig, 'security_storage')
                    }));
                }
            }

            showBadge();

            if (cbUI.popup.element) {
                var allowedGroups = currentConfig.split(',');
                var checkedCheckboxes = cbUI.popup.element.querySelectorAll('input[type="checkbox"]:checked');

                for (var j = 0; j < checkedCheckboxes.length; j++) {
                    var name = checkedCheckboxes[j].getAttribute('data-group-name');

                    if (name && name !== '-' && allowedGroups.indexOf(name) === -1) {
                        checkedCheckboxes[j].checked = false;
                    }
                }

                for (var i = 0; i < allowedGroups.length; i++) {
                    var checkbox = cbUI.popup.element.querySelector('input[type="checkbox"][data-group-name="' + allowedGroups[i] + '"]');

                    if (checkbox) {
                        checkbox.checked = true;
                    }

                    allowCookieGroup(allowedGroups[i]);
                }
            }
        }

        setTimeout(function () {
            cbConfig.initialState = getInitialStateOfConsents();
        }, 0);
    }

    function checkIfConfigIsFresh () {
        var lastConfigSave = localStorage.getItem('publii-gdpr-cookies-config-save-date');

        if (lastConfigSave === null) {
            return false;
        }

        lastConfigSave = parseInt(lastConfigSave, 10);

        if (lastConfigSave === 0) {
            return true;
        }

        if (+new Date() - lastConfigSave < cbConfig.configTTL * 24 * 60 * 60 * 1000) {
            return true;
        }

        return false;
    }

    function getDefaultConsentState (currentConfig, consentGroup) {
        let configGroups = currentConfig.split(',');

        for (let i = 0; i < configGroups.length; i++) {
            let groupName = configGroups[i];
            let group = window.publiiCBGCM.groups.find(group => group.cookieGroup === groupName);

            if (group && group[consentGroup]) {
                return 'granted';
            }
        }  
        
        if (window.publiiCBGCM.defaultState[consentGroup]) {
            return 'granted'; 
        }
        
        return 'denied';
    }

    function initBannerEvents () {
        cbUI.banner.btnAccept.addEventListener('click', function (e) {
            e.preventDefault();
            acceptAllCookies('banner');
            showBadge();
        }, false);

        if (cbUI.banner.btnReject) {
            cbUI.banner.btnReject.addEventListener('click', function (e) {
                e.preventDefault();
                rejectAllCookies();
                showBadge();
            }, false);
        }

        if (cbUI.banner.btnConfigure) {
            cbUI.banner.btnConfigure.addEventListener('click', function (e) {
                e.preventDefault();
                hideBanner();
                showAdvancedPopup();
                showBadge();
            }, false);
        }
    }

    function initPopupEvents () {
        if (!cbUI.popup.element) {
            return;
        }

        cbUI.overlay.addEventListener('click', function (e) {
            hideAdvancedPopup();
        }, false);

        cbUI.popup.element.addEventListener('click', function (e) {
            e.stopPropagation();
        }, false);

        cbUI.popup.btnAccept.addEventListener('click', function (e) {
            e.preventDefault();
            acceptAllCookies('popup');
        }, false);

        cbUI.popup.btnReject.addEventListener('click', function (e) {
            e.preventDefault();
            rejectAllCookies();
        }, false);

        cbUI.popup.btnSave.addEventListener('click', function (e) {
            e.preventDefault();
            saveConfiguration();
        }, false);

        cbUI.popup.btnClose.addEventListener('click', function (e) {
            e.preventDefault();
            hideAdvancedPopup();
        }, false);
    }

    function initBadgeEvents () {
        if (!cbUI.badge) {
            return;
        }

        cbUI.badge.addEventListener('click', function (e) {
            showBannerOrPopup();
        }, false);
    }

    initUI();
    initState();
    initBannerEvents();
    initPopupEvents();
    initBadgeEvents();

    /**
     * API
     */
    function addScript (src, inline) {
        var newScript = document.createElement('script');

        if (src) {
            newScript.setAttribute('src', src);
        }

        if (inline) {
            newScript.text = inline;
        }

        document.body.appendChild(newScript);
    }

    function allowCookieGroup (allowedGroup) {
        var scripts = document.querySelectorAll('script[type="gdpr-blocker/' + allowedGroup + '"]');
        cbConfig.previouslyAccepted.push(allowedGroup);
    
        for (var j = 0; j < scripts.length; j++) {
            addScript(scripts[j].src, scripts[j].text);
        }

        var groupEvent = new Event('publii-cookie-banner-unblock-' + allowedGroup);
        document.body.dispatchEvent(groupEvent);
        unlockEmbeds(allowedGroup);

        if (cbConfig.debugMode) {
            console.log('🍪 Allowed group: ' + allowedGroup);
        }

        if (window.publiiCBGCM && (!cbConfig.initialLsState || cbConfig.initialLsState.indexOf(allowedGroup) === -1)) {
            let consentResult = {};
            let group = window.publiiCBGCM.groups.find(group => group.cookieGroup === allowedGroup);

            if (group) {
                let foundSomeConsents = false;

                Object.keys(group).forEach(key => {
                    if (key !== 'cookieGroup' && group[key] === true) {
                        consentResult[key] = 'granted';
                        foundSomeConsents = true;
                    }
                });

                if (foundSomeConsents) {
                    gtag('consent', 'update', consentResult);   

                    if (cbConfig.debugMode) {
                        console.log('🍪 GCMv2 UPDATE: ' + JSON.stringify(consentResult));
                    }
                }
            }
        }
    }

    function showBannerOrPopup () {
        if (cbUI.popup.element) {
            showAdvancedPopup();
        } else {
            showBanner();
        }
    }

    function showAdvancedPopup () {
        cbUI.popup.element.classList.add('is-visible');
        cbUI.overlay.classList.add('is-visible');
        cbUI.popup.element.setAttribute('aria-hidden', 'false');
        cbUI.overlay.setAttribute('aria-hidden', 'false');
    }

    function hideAdvancedPopup () {
        cbUI.popup.element.classList.remove('is-visible');
        cbUI.overlay.classList.remove('is-visible');
        cbUI.popup.element.setAttribute('aria-hidden', 'true');
        cbUI.overlay.setAttribute('aria-hidden', 'true');
    }

    function showBanner () {
        cbUI.banner.element.classList.add('is-visible');
        cbUI.banner.element.setAttribute('aria-hidden', 'false');
    }

    function hideBanner () {
        cbUI.banner.element.classList.remove('is-visible');
        cbUI.banner.element.setAttribute('aria-hidden', 'true');
    }

    function showBadge () {
        if (!cbUI.badge) {
            return;
        }

        cbUI.badge.classList.add('is-visible');
        cbUI.badge.setAttribute('aria-hidden', 'false');
    }

    function getConfigName () {
        var lsKeyName = 'publii-gdpr-allowed-cookies';

        if (cbConfig.revision) {
            lsKeyName = lsKeyName + '-v' + parseInt(cbConfig.revision, 10);
        }

        return lsKeyName;
    }

    function storeConfiguration (allowedGroups) {
        var lsKeyName = getConfigName();
        var dataToStore = allowedGroups.join(',');
        localStorage.setItem(lsKeyName, dataToStore);

        if (cbConfig.configTTL === 0) {
            localStorage.setItem('publii-gdpr-cookies-config-save-date', 0);

            if (cbConfig.debugMode) {
                console.log('🍪 Store never expiring configuration');
            }
        } else {
            localStorage.setItem('publii-gdpr-cookies-config-save-date', +new Date());
        }
    }

    function getInitialStateOfConsents () {
        if (!cbUI.popup.element) {
            return [];
        }

        var checkedGroups = cbUI.popup.element.querySelectorAll('input[type="checkbox"]:checked');
        var groups = [];

        for (var i = 0; i < checkedGroups.length; i++) {
            var allowedGroup = checkedGroups[i].getAttribute('data-group-name');

            if (allowedGroup !== '') {
                groups.push(allowedGroup);
            }
        }

        if (cbConfig.debugMode) {
            console.log('🍪 Initial state: ' + groups.join(', '));
        }

        return groups;
    }

    function getCurrentStateOfConsents () {
        if (!cbUI.popup.element) {
            return [];
        }

        var checkedGroups = cbUI.popup.element.querySelectorAll('input[type="checkbox"]:checked');
        var groups = [];

        for (var i = 0; i < checkedGroups.length; i++) {
            var allowedGroup = checkedGroups[i].getAttribute('data-group-name');

            if (allowedGroup !== '') {
                groups.push(allowedGroup);
            }
        }

        if (cbConfig.debugMode) {
            console.log('🍪 State to save: ' + groups.join(', '));
        }

        return groups;
    }

    function getAllGroups () {
        if (!cbUI.popup.element) {
            return [];
        }

        var checkedGroups = cbUI.popup.element.querySelectorAll('input[type="checkbox"]');
        var groups = [];

        for (var i = 0; i < checkedGroups.length; i++) {
            var allowedGroup = checkedGroups[i].getAttribute('data-group-name');

            if (allowedGroup !== '') {
                groups.push(allowedGroup);
            }
        }

        return groups;
    }

    function acceptAllCookies (source) {
        var groupsToAccept = getAllGroups();
        storeConfiguration(groupsToAccept);

        for (var i = 0; i < groupsToAccept.length; i++) {
            var group = groupsToAccept[i];

            if (cbConfig.initialState.indexOf(group) > -1 || cbConfig.previouslyAccepted.indexOf(group) > -1) {
                if (cbConfig.debugMode) {
                    console.log('🍪 Skip previously activated group: ' + group);
                }

                continue;
            }

            allowCookieGroup(group);
        }

        if (cbUI.popup.element) {
            var checkboxesToCheck = cbUI.popup.element.querySelectorAll('input[type="checkbox"]');

            for (var j = 0; j < checkboxesToCheck.length; j++) {
                checkboxesToCheck[j].checked = true;
            }
        }

        if (cbConfig.debugMode) {
            console.log('🍪 Accept all cookies: ', groupsToAccept.join(', '));
        }

        if (source === 'popup') {
            hideAdvancedPopup();
        } else if (source === 'banner') {
            hideBanner();
        }
    }

    function rejectAllCookies () {
        if (cbConfig.debugMode) {
            console.log('🍪 Reject all cookies');
        }

        storeConfiguration([]);
        setTimeout(function () {
            window.location.reload();
        }, 100);
    }

    function saveConfiguration () {
        var groupsToAccept = getCurrentStateOfConsents();
        storeConfiguration(groupsToAccept);

        if (cbConfig.debugMode) {
            console.log('🍪 Save new config: ', groupsToAccept.join(', '));
        }

        if (reloadIsNeeded(groupsToAccept)) {
            setTimeout(function () {
                window.location.reload();
            }, 100);
            return;
        }

        for (var i = 0; i < groupsToAccept.length; i++) {
            var group = groupsToAccept[i];

            if (cbConfig.initialState.indexOf(group) > -1 || cbConfig.previouslyAccepted.indexOf(group) > -1) {
                if (cbConfig.debugMode) {
                    console.log('🍪 Skip previously activated group: ' + group);
                }

                continue;
            }

            allowCookieGroup(group);
        }

        hideAdvancedPopup();
    }

    function reloadIsNeeded (groupsToAccept) {
        // check if user rejected consent for initial groups
        var initialGroups = cbConfig.initialState;
        var previouslyAcceptedGroups = cbConfig.previouslyAccepted;
        var groupsToCheck = initialGroups.concat(previouslyAcceptedGroups);

        for (var i = 0; i < groupsToCheck.length; i++) {
            var groupToCheck = groupsToCheck[i];

            if (groupToCheck !== '' && groupsToAccept.indexOf(groupToCheck) === -1) {
                if (cbConfig.debugMode) {
                    console.log('🍪 Reload is needed due lack of: ', groupToCheck);
                }

                return true;
            }
        }

        return false;
    }

    function unlockEmbeds (cookieGroup) {
        var iframesToUnlock = document.querySelectorAll('.pec-wrapper[data-consent-group-id="' + cookieGroup + '"]');

        for (var i = 0; i < iframesToUnlock.length; i++) {
            var iframeWrapper = iframesToUnlock[i];
            iframeWrapper.querySelector('.pec-overlay').classList.remove('is-active');
            iframeWrapper.querySelector('.pec-overlay').setAttribute('aria-hidden', 'true');
            var iframe = iframeWrapper.querySelector('iframe');
            iframe.setAttribute('src', iframe.getAttribute('data-consent-src'));
        }
    }

    win.publiiEmbedConsentGiven = function (cookieGroup) {
        // it will unlock embeds
        allowCookieGroup(cookieGroup);

        var checkbox = cbUI.popup.element.querySelector('input[type="checkbox"][data-group-name="' + cookieGroup + '"]');

        if (checkbox) {
            checkbox.checked = true;
        }

        var groupsToAccept = getCurrentStateOfConsents();
        storeConfiguration(groupsToAccept);

        if (cbConfig.debugMode) {
            console.log('🍪 Save new config: ', groupsToAccept.join(', '));
        }
    }
})(window);</script></body></html>